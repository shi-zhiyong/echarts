<template>
  <div
    class="echarts">
    <h3>
      myCharts</h3>
    <div
      ref="mapHeatmap"
      style="width: 50%;height: 80%"></div>
    <div
      ref="mapChart2"
      style="width: 100%;height: 100%"></div>
    <div
      ref="mapChart"
      style="width: 100%;height: 100%"></div>
    <div
      ref="myChart"
      style="width: 100%;height: 100%"></div>
    <div
      ref="myRingChart"
      style="width: 100%;height: 100%"></div>
    <div
      ref="myBarLine"
      style="width: 100%;height: 100%"></div>
    <div
      ref="myRadar"
      style="width: 100%;height: 100%"></div>
    <div
      ref="myLines"
      style="width: 100%;height: 100%"></div>
  </div>
</template>

<script>
  import echarts
    from 'echarts'
  import china
    from '../../node_modules/echarts/map/js/china.js'
  import '../../node_modules/echarts/extension/bmap/bmap.js'
  import mapHeatmapData
    from '../assets/data'
  // import world from '../../node_modules/echarts/map/js/world.js'
  // import chinaContour from '../../node_modules/echarts/map/js/china-contour.js'
  import * as loadMap from '../loadMap'
  export default {
    name: "echart",
    data() {
      return {
        myChart: null,
        mapChart: null,
        mapChart2: null,
        mapHeatmap: null,
        myRingChart: null,
        myBarLine: null,
        myRadar:null,
        myLines:null
      }
    },
    mounted() {
      this.init();
      // console.log(111);
    },
    methods: {
      //初始化
      init() {
        // this.drawLine();
        // this.drawMap();
        // this.drawMap2();
        // loadMap.loadBMap().then(()=> this.drawHeatmap());
        // this.drawRing();
        // this.drawBarLine();
        // this.drawRadar();
        this.drawLines();


        //不可用
        // window.addEventListener(
        //   'resize',
        //   this.debounce(this.myChart.resize(),500)
        // );

        window.onresize = () => {
          return (() => {
            // this.debounce(this.myChart.resize(), 500);
            // this.debounce(this.mapChart.resize(),500);
            // this.debounce(this.mapChart2.resize(), 500);
            // this.debounce(this.mapHeatmap.resize(), 500);
            // this.debounce(this.myRingChart.resize(), 500);
            // this.debounce(this.myBarLine.resize(), 500);
            // this.debounce(this.myRadar.resize(), 500);
            this.debounce(this.mylines.resize(), 500);
          })()
        }
      },
      //折线图
      drawLine() {
        // 基于准备好的dom，初始化echarts实例
        this.myChart = echarts.init(this.$refs.myChart);
        // 绘制图表
        this.myChart.setOption({
          title: {text: 'echarts 柱状图'},
          tooltip: {},
          xAxis: {
            data: ["服装1", "服装2", "服装3", "服装4", "服装5", "服装6"]
          },
          yAxis: {},
          series: [{
            name: '销量',
            type: 'line',
            data: [{
              value: 5,
              symbol: 'triangle',
              label: {show: true}
            }, 20, 36, 10, 10, 20],  // 1 symbol为拐点上的标记符号,可以自定义 2 label在这里可以单独的设置每一个数据
            // 下边的这些配置是对所有数据生效的
            label: {
              show: true,
              //formatter rich 组合使用可以自定义样式
              formatter: function (data) {
                console.log('drawLine-formatter', data)
              },
              rich: {}
            },
            symbol: 'triangle'
          }]
        });
      },
      //地图
      drawMap() {
        var dataList = [
          {
            name: "南海诸岛",
            value: 0
          },
          {
            name: '北京',
            value: this.randomValue()
          },
          {
            name: '天津',
            value: this.randomValue()
          },
          {
            name: '上海',
            value: this.randomValue()
          },
          {
            name: '重庆',
            value: this.randomValue()
          },
          {
            name: '河北',
            value: this.randomValue()
          },
          {
            name: '河南',
            value: this.randomValue()
          },
          {
            name: '云南',
            value: this.randomValue()
          },
          {
            name: '辽宁',
            value: this.randomValue()
          },
          {
            name: '黑龙江',
            value: this.randomValue()
          },
          {
            name: '湖南',
            value: this.randomValue()
          },
          {
            name: '安徽',
            value: this.randomValue()
          },
          {
            name: '山东',
            value: this.randomValue()
          },
          {
            name: '新疆',
            value: this.randomValue()
          },
          {
            name: '江苏',
            value: this.randomValue()
          },
          {
            name: '浙江',
            value: this.randomValue()
          },
          {
            name: '江西',
            value: this.randomValue()
          },
          {
            name: '湖北',
            value: this.randomValue()
          },
          {
            name: '广西',
            value: this.randomValue()
          },
          {
            name: '甘肃',
            value: this.randomValue()
          },
          {
            name: '山西',
            value: this.randomValue()
          },
          {
            name: '内蒙古',
            value: this.randomValue()
          },
          {
            name: '陕西',
            value: this.randomValue()
          },
          {
            name: '吉林',
            value: this.randomValue()
          },
          {
            name: '福建',
            value: this.randomValue()
          },
          {
            name: '贵州',
            value: this.randomValue()
          },
          {
            name: '广东',
            value: this.randomValue()
          },
          {
            name: '青海',
            value: this.randomValue()
          },
          {
            name: '西藏',
            value: this.randomValue()
          },
          {
            name: '四川',
            value: this.randomValue()
          },
          {
            name: '宁夏',
            value: this.randomValue()
          },
          {
            name: '海南',
            value: this.randomValue()
          },
          {
            name: '台湾',
            value: this.randomValue()
          },
          {
            name: '香港',
            value: this.randomValue()
          },
          {
            name: '澳门',
            value: this.randomValue()
          }
        ];
        this.mapChart = echarts.init(this.$refs.mapChart);
        let option = {
          tooltip: {
            // formatter:function(params,ticket, callback){
            //   return params.seriesName+'<br />'+params.name+'：'+params.value
            // }
          },
          visualMap: {
            min: 0,
            max: 1500,
            left: 'left',
            top: 'bottom',
            text: ['高', '低'],
            inRange: {
              color: ['#e0ffff', '#006edd']
            },
            show: true
          },
          geo: {
            map: 'china',
            roam: false,
            zoom: 1.23,
            label: {
              normal: {
                show: true,
                fontSize: '10',
                color: 'rgba(0,0,0,0.7)'
              }
            },
            itemStyle: {
              normal: {
                borderColor: 'rgba(0, 0, 0, 0.2)'
              },
              emphasis: {
                areaColor: '#F3B329',
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowBlur: 20,
                borderWidth: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          },
          series: [
            {
              name: '信息量',
              type: 'map',
              geoIndex: 0,
              data: dataList
            }
          ],
        };
        this.mapChart.setOption(option);
      },
      //地图2
      drawMap2() {
        //数据
        var data = [
          {
            name: '海门',
            value: 9
          },
          {
            name: '鄂尔多斯',
            value: 12
          },
          {
            name: '招远',
            value: 12
          },
          {
            name: '舟山',
            value: 12
          },
          {
            name: '齐齐哈尔',
            value: 14
          },
          {
            name: '盐城',
            value: 15
          },
          {
            name: '赤峰',
            value: 16
          },
          {
            name: '青岛',
            value: 18
          },
          {
            name: '乳山',
            value: 18
          },
          {
            name: '金昌',
            value: 19
          },
          {
            name: '泉州',
            value: 21
          },
          {
            name: '莱西',
            value: 21
          },
          {
            name: '日照',
            value: 21
          },
          {
            name: '胶南',
            value: 22
          },
          {
            name: '南通',
            value: 23
          },
          {
            name: '拉萨',
            value: 24
          },
          {
            name: '云浮',
            value: 24
          },
          {
            name: '梅州',
            value: 25
          },
          {
            name: '文登',
            value: 25
          },
          {
            name: '上海',
            value: 25
          },
          {
            name: '攀枝花',
            value: 25
          },
          {
            name: '威海',
            value: 25
          },
          {
            name: '承德',
            value: 25
          },
          {
            name: '厦门',
            value: 26
          },
          {
            name: '汕尾',
            value: 26
          },
          {
            name: '潮州',
            value: 26
          },
          {
            name: '丹东',
            value: 27
          },
          {
            name: '太仓',
            value: 27
          },
          {
            name: '曲靖',
            value: 27
          },
          {
            name: '烟台',
            value: 28
          },
          {
            name: '福州',
            value: 29
          },
          {
            name: '瓦房店',
            value: 30
          },
          {
            name: '即墨',
            value: 30
          },
          {
            name: '抚顺',
            value: 31
          },
          {
            name: '玉溪',
            value: 31
          },
          {
            name: '张家口',
            value: 31
          },
          {
            name: '阳泉',
            value: 31
          },
          {
            name: '莱州',
            value: 32
          },
          {
            name: '湖州',
            value: 32
          },
          {
            name: '汕头',
            value: 32
          },
          {
            name: '昆山',
            value: 33
          },
          {
            name: '宁波',
            value: 33
          },
          {
            name: '湛江',
            value: 33
          },
          {
            name: '揭阳',
            value: 34
          },
          {
            name: '荣成',
            value: 34
          },
          {
            name: '连云港',
            value: 35
          },
          {
            name: '葫芦岛',
            value: 35
          },
          {
            name: '常熟',
            value: 36
          },
          {
            name: '东莞',
            value: 36
          },
          {
            name: '河源',
            value: 36
          },
          {
            name: '淮安',
            value: 36
          },
          {
            name: '泰州',
            value: 36
          },
          {
            name: '南宁',
            value: 37
          },
          {
            name: '营口',
            value: 37
          },
          {
            name: '惠州',
            value: 37
          },
          {
            name: '江阴',
            value: 37
          },
          {
            name: '蓬莱',
            value: 37
          },
          {
            name: '韶关',
            value: 38
          },
          {
            name: '嘉峪关',
            value: 38
          },
          {
            name: '广州',
            value: 38
          },
          {
            name: '延安',
            value: 38
          },
          {
            name: '太原',
            value: 39
          },
          {
            name: '清远',
            value: 39
          },
          {
            name: '中山',
            value: 39
          },
          {
            name: '昆明',
            value: 39
          },
          {
            name: '寿光',
            value: 40
          },
          {
            name: '盘锦',
            value: 40
          },
          {
            name: '长治',
            value: 41
          },
          {
            name: '深圳',
            value: 41
          },
          {
            name: '珠海',
            value: 42
          },
          {
            name: '宿迁',
            value: 43
          },
          {
            name: '咸阳',
            value: 43
          },
          {
            name: '铜川',
            value: 44
          },
          {
            name: '平度',
            value: 44
          },
          {
            name: '佛山',
            value: 44
          },
          {
            name: '海口',
            value: 44
          },
          {
            name: '江门',
            value: 45
          },
          {
            name: '章丘',
            value: 45
          },
          {
            name: '肇庆',
            value: 46
          },
          {
            name: '大连',
            value: 47
          },
          {
            name: '临汾',
            value: 47
          },
          {
            name: '吴江',
            value: 47
          },
          {
            name: '石嘴山',
            value: 49
          },
          {
            name: '沈阳',
            value: 50
          },
          {
            name: '苏州',
            value: 50
          },
          {
            name: '茂名',
            value: 50
          },
          {
            name: '嘉兴',
            value: 51
          },
          {
            name: '长春',
            value: 51
          },
          {
            name: '胶州',
            value: 52
          },
          {
            name: '银川',
            value: 52
          },
          {
            name: '张家港',
            value: 52
          },
          {
            name: '三门峡',
            value: 53
          },
          {
            name: '锦州',
            value: 54
          },
          {
            name: '南昌',
            value: 54
          },
          {
            name: '柳州',
            value: 54
          },
          {
            name: '三亚',
            value: 54
          },
          {
            name: '自贡',
            value: 56
          },
          {
            name: '吉林',
            value: 56
          },
          {
            name: '阳江',
            value: 57
          },
          {
            name: '泸州',
            value: 57
          },
          {
            name: '西宁',
            value: 57
          },
          {
            name: '宜宾',
            value: 58
          },
          {
            name: '呼和浩特',
            value: 58
          },
          {
            name: '成都',
            value: 58
          },
          {
            name: '大同',
            value: 58
          },
          {
            name: '镇江',
            value: 59
          },
          {
            name: '桂林',
            value: 59
          },
          {
            name: '张家界',
            value: 59
          },
          {
            name: '宜兴',
            value: 59
          },
          {
            name: '北海',
            value: 60
          },
          {
            name: '西安',
            value: 61
          },
          {
            name: '金坛',
            value: 62
          },
          {
            name: '东营',
            value: 62
          },
          {
            name: '牡丹江',
            value: 63
          },
          {
            name: '遵义',
            value: 63
          },
          {
            name: '绍兴',
            value: 63
          },
          {
            name: '扬州',
            value: 64
          },
          {
            name: '常州',
            value: 64
          },
          {
            name: '潍坊',
            value: 65
          },
          {
            name: '重庆',
            value: 66
          },
          {
            name: '台州',
            value: 67
          },
          {
            name: '南京',
            value: 67
          },
          {
            name: '滨州',
            value: 70
          },
          {
            name: '贵阳',
            value: 71
          },
          {
            name: '无锡',
            value: 71
          },
          {
            name: '本溪',
            value: 71
          },
          {
            name: '克拉玛依',
            value: 72
          },
          {
            name: '渭南',
            value: 72
          },
          {
            name: '马鞍山',
            value: 72
          },
          {
            name: '宝鸡',
            value: 72
          },
          {
            name: '焦作',
            value: 75
          },
          {
            name: '句容',
            value: 75
          },
          {
            name: '北京',
            value: 79
          },
          {
            name: '徐州',
            value: 79
          },
          {
            name: '衡水',
            value: 80
          },
          {
            name: '包头',
            value: 80
          },
          {
            name: '绵阳',
            value: 80
          },
          {
            name: '乌鲁木齐',
            value: 84
          },
          {
            name: '枣庄',
            value: 84
          },
          {
            name: '杭州',
            value: 84
          },
          {
            name: '淄博',
            value: 85
          },
          {
            name: '鞍山',
            value: 86
          },
          {
            name: '溧阳',
            value: 86
          },
          {
            name: '库尔勒',
            value: 86
          },
          {
            name: '安阳',
            value: 90
          },
          {
            name: '开封',
            value: 90
          },
          {
            name: '济南',
            value: 92
          },
          {
            name: '德阳',
            value: 93
          },
          {
            name: '温州',
            value: 95
          },
          {
            name: '九江',
            value: 96
          },
          {
            name: '邯郸',
            value: 98
          },
          {
            name: '临安',
            value: 99
          },
          {
            name: '兰州',
            value: 99
          },
          {
            name: '沧州',
            value: 100
          },
          {
            name: '临沂',
            value: 103
          },
          {
            name: '南充',
            value: 104
          },
          {
            name: '天津',
            value: 105
          },
          {
            name: '富阳',
            value: 106
          },
          {
            name: '泰安',
            value: 112
          },
          {
            name: '诸暨',
            value: 112
          },
          {
            name: '郑州',
            value: 113
          },
          {
            name: '哈尔滨',
            value: 114
          },
          {
            name: '聊城',
            value: 116
          },
          {
            name: '芜湖',
            value: 117
          },
          {
            name: '唐山',
            value: 119
          },
          {
            name: '平顶山',
            value: 119
          },
          {
            name: '邢台',
            value: 119
          },
          {
            name: '德州',
            value: 120
          },
          {
            name: '济宁',
            value: 120
          },
          {
            name: '荆州',
            value: 127
          },
          {
            name: '宜昌',
            value: 130
          },
          {
            name: '义乌',
            value: 132
          },
          {
            name: '丽水',
            value: 133
          },
          {
            name: '洛阳',
            value: 134
          },
          {
            name: '秦皇岛',
            value: 136
          },
          {
            name: '株洲',
            value: 143
          },
          {
            name: '石家庄',
            value: 147
          },
          {
            name: '莱芜',
            value: 148
          },
          {
            name: '常德',
            value: 152
          },
          {
            name: '保定',
            value: 153
          },
          {
            name: '湘潭',
            value: 154
          },
          {
            name: '金华',
            value: 157
          },
          {
            name: '岳阳',
            value: 169
          },
          {
            name: '长沙',
            value: 175
          },
          {
            name: '衢州',
            value: 177
          },
          {
            name: '廊坊',
            value: 193
          },
          {
            name: '菏泽',
            value: 194
          },
          {
            name: '合肥',
            value: 229
          },
          {
            name: '武汉',
            value: 273
          },
          {
            name: '大庆',
            value: 279
          }
        ];
        var geoCoordMap = {
          '海门': [121.15, 31.89],
          '鄂尔多斯': [109.781327, 39.608266],
          '招远': [120.38, 37.35],
          '舟山': [122.207216, 29.985295],
          '齐齐哈尔': [123.97, 47.33],
          '盐城': [120.13, 33.38],
          '赤峰': [118.87, 42.28],
          '青岛': [120.33, 36.07],
          '乳山': [121.52, 36.89],
          '金昌': [102.188043, 38.520089],
          '泉州': [118.58, 24.93],
          '莱西': [120.53, 36.86],
          '日照': [119.46, 35.42],
          '胶南': [119.97, 35.88],
          '南通': [121.05, 32.08],
          '拉萨': [91.11, 29.97],
          '云浮': [112.02, 22.93],
          '梅州': [116.1, 24.55],
          '文登': [122.05, 37.2],
          '上海': [121.48, 31.22],
          '攀枝花': [101.718637, 26.582347],
          '威海': [122.1, 37.5],
          '承德': [117.93, 40.97],
          '厦门': [118.1, 24.46],
          '汕尾': [115.375279, 22.786211],
          '潮州': [116.63, 23.68],
          '丹东': [124.37, 40.13],
          '太仓': [121.1, 31.45],
          '曲靖': [103.79, 25.51],
          '烟台': [121.39, 37.52],
          '福州': [119.3, 26.08],
          '瓦房店': [121.979603, 39.627114],
          '即墨': [120.45, 36.38],
          '抚顺': [123.97, 41.97],
          '玉溪': [102.52, 24.35],
          '张家口': [114.87, 40.82],
          '阳泉': [113.57, 37.85],
          '莱州': [119.942327, 37.177017],
          '湖州': [120.1, 30.86],
          '汕头': [116.69, 23.39],
          '昆山': [120.95, 31.39],
          '宁波': [121.56, 29.86],
          '湛江': [110.359377, 21.270708],
          '揭阳': [116.35, 23.55],
          '荣成': [122.41, 37.16],
          '连云港': [119.16, 34.59],
          '葫芦岛': [120.836932, 40.711052],
          '常熟': [120.74, 31.64],
          '东莞': [113.75, 23.04],
          '河源': [114.68, 23.73],
          '淮安': [119.15, 33.5],
          '泰州': [119.9, 32.49],
          '南宁': [108.33, 22.84],
          '营口': [122.18, 40.65],
          '惠州': [114.4, 23.09],
          '江阴': [120.26, 31.91],
          '蓬莱': [120.75, 37.8],
          '韶关': [113.62, 24.84],
          '嘉峪关': [98.289152, 39.77313],
          '广州': [113.23, 23.16],
          '延安': [109.47, 36.6],
          '太原': [112.53, 37.87],
          '清远': [113.01, 23.7],
          '中山': [113.38, 22.52],
          '昆明': [102.73, 25.04],
          '寿光': [118.73, 36.86],
          '盘锦': [122.070714, 41.119997],
          '长治': [113.08, 36.18],
          '深圳': [114.07, 22.62],
          '珠海': [113.52, 22.3],
          '宿迁': [118.3, 33.96],
          '咸阳': [108.72, 34.36],
          '铜川': [109.11, 35.09],
          '平度': [119.97, 36.77],
          '佛山': [113.11, 23.05],
          '海口': [110.35, 20.02],
          '江门': [113.06, 22.61],
          '章丘': [117.53, 36.72],
          '肇庆': [112.44, 23.05],
          '大连': [121.62, 38.92],
          '临汾': [111.5, 36.08],
          '吴江': [120.63, 31.16],
          '石嘴山': [106.39, 39.04],
          '沈阳': [123.38, 41.8],
          '苏州': [120.62, 31.32],
          '茂名': [110.88, 21.68],
          '嘉兴': [120.76, 30.77],
          '长春': [125.35, 43.88],
          '胶州': [120.03336, 36.264622],
          '银川': [106.27, 38.47],
          '张家港': [120.555821, 31.875428],
          '三门峡': [111.19, 34.76],
          '锦州': [121.15, 41.13],
          '南昌': [115.89, 28.68],
          '柳州': [109.4, 24.33],
          '三亚': [109.511909, 18.252847],
          '自贡': [104.778442, 29.33903],
          '吉林': [126.57, 43.87],
          '阳江': [111.95, 21.85],
          '泸州': [105.39, 28.91],
          '西宁': [101.74, 36.56],
          '宜宾': [104.56, 29.77],
          '呼和浩特': [111.65, 40.82],
          '成都': [104.06, 30.67],
          '大同': [113.3, 40.12],
          '镇江': [119.44, 32.2],
          '桂林': [110.28, 25.29],
          '张家界': [110.479191, 29.117096],
          '宜兴': [119.82, 31.36],
          '北海': [109.12, 21.49],
          '西安': [108.95, 34.27],
          '金坛': [119.56, 31.74],
          '东营': [118.49, 37.46],
          '牡丹江': [129.58, 44.6],
          '遵义': [106.9, 27.7],
          '绍兴': [120.58, 30.01],
          '扬州': [119.42, 32.39],
          '常州': [119.95, 31.79],
          '潍坊': [119.1, 36.62],
          '重庆': [106.54, 29.59],
          '台州': [121.420757, 28.656386],
          '南京': [118.78, 32.04],
          '滨州': [118.03, 37.36],
          '贵阳': [106.71, 26.57],
          '无锡': [120.29, 31.59],
          '本溪': [123.73, 41.3],
          '克拉玛依': [84.77, 45.59],
          '渭南': [109.5, 34.52],
          '马鞍山': [118.48, 31.56],
          '宝鸡': [107.15, 34.38],
          '焦作': [113.21, 35.24],
          '句容': [119.16, 31.95],
          '北京': [116.46, 39.92],
          '徐州': [117.2, 34.26],
          '衡水': [115.72, 37.72],
          '包头': [110, 40.58],
          '绵阳': [104.73, 31.48],
          '乌鲁木齐': [87.68, 43.77],
          '枣庄': [117.57, 34.86],
          '杭州': [120.19, 30.26],
          '淄博': [118.05, 36.78],
          '鞍山': [122.85, 41.12],
          '溧阳': [119.48, 31.43],
          '库尔勒': [86.06, 41.68],
          '安阳': [114.35, 36.1],
          '开封': [114.35, 34.79],
          '济南': [117, 36.65],
          '德阳': [104.37, 31.13],
          '温州': [120.65, 28.01],
          '九江': [115.97, 29.71],
          '邯郸': [114.47, 36.6],
          '临安': [119.72, 30.23],
          '兰州': [103.73, 36.03],
          '沧州': [116.83, 38.33],
          '临沂': [118.35, 35.05],
          '南充': [106.110698, 30.837793],
          '天津': [117.2, 39.13],
          '富阳': [119.95, 30.07],
          '泰安': [117.13, 36.18],
          '诸暨': [120.23, 29.71],
          '郑州': [113.65, 34.76],
          '哈尔滨': [126.63, 45.75],
          '聊城': [115.97, 36.45],
          '芜湖': [118.38, 31.33],
          '唐山': [118.02, 39.63],
          '平顶山': [113.29, 33.75],
          '邢台': [114.48, 37.05],
          '德州': [116.29, 37.45],
          '济宁': [116.59, 35.38],
          '荆州': [112.239741, 30.335165],
          '宜昌': [111.3, 30.7],
          '义乌': [120.06, 29.32],
          '丽水': [119.92, 28.45],
          '洛阳': [112.44, 34.7],
          '秦皇岛': [119.57, 39.95],
          '株洲': [113.16, 27.83],
          '石家庄': [114.48, 38.03],
          '莱芜': [117.67, 36.19],
          '常德': [111.69, 29.05],
          '保定': [115.48, 38.85],
          '湘潭': [112.91, 27.87],
          '金华': [119.64, 29.12],
          '岳阳': [113.09, 29.37],
          '长沙': [113, 28.21],
          '衢州': [118.88, 28.97],
          '廊坊': [116.7, 39.53],
          '菏泽': [115.480656, 35.23375],
          '合肥': [117.27, 31.86],
          '武汉': [114.31, 30.52],
          '大庆': [125.03, 46.58]
        };
        //处理数据
        var res = [];
        for (var i = 0; i < data.length; i++) {
          var geoCoord = geoCoordMap[data[i].name];
          if (geoCoord) {
            res.push({
              name: data[i].name,
              value: geoCoord.concat(data[i].value)
            });
          }
        }
        /*
        {
          name: "自贡",
          value:[104.778442, 29.33903, 56]
        }
        * */
        console.log(res);

        this.mapChart2 = echarts.init(this.$refs.mapChart2);
        let option = {
          tooltip: {
            // formatter:function(params,ticket, callback){
            //   return params.seriesName+'<br />'+params.name+'：'+params.value
            // }
          },
          visualMap: {
            type: 'piecewise',  //continuous为连续   piecewise为分段
            // todo 一般的设置
            min: 0,
            max: 500,
            splitNumber: 5,
            // text: ['高','低'], //不写的话会在每个 标记中显示数据范围
            inRange: {
              //定义 在选中范围中 的视觉元素。（用户可以和 visualMap 组件交互，用鼠标或触摸选择范围）
              color: ['red', 'black'] //两个端的颜色
            },
            // itemWidth:'50',  //图形的宽度，即每个小块的宽度。
            itemSymbol: 'circle',  //图形的形状
            left: 'left',
            top: 'bottom',
            dimension: 2,  // 指定用数据的『哪个维度』，映射到视觉元素上。
            // todo 自定义『分段式视觉映射组件（visualMapPiecewise）』的每一段的范围，以及每一段的文字，以及每一段的特别的样
            // pieces: [
            //   {min: 1500}, // 不指定 max，表示 max 为无限大（Infinity）。
            //   {min: 900, max: 1500},
            //   {min: 310, max: 1000},
            //   {min: 200, max: 300},
            //   {min: 10, max: 200, label: '10 到 200（自定义label）'},
            //   {value: 29.97, label: '29.97（自定义特殊颜色）', color: 'grey'}, // 表示 value 等于 29.97 的情况。
            //   {max: 5}     // 不指定 min，表示 min 为无限大（-Infinity）。
            // ],
            show: true
          },
          geo: {
            map: 'china',
            roam: false,
            zoom: 1.23,
            label: {
              normal: {
                show: true,
                fontSize: '10',
                color: 'rgba(0,0,0,0.7)'
              }
            },
            itemStyle: {
              normal: {
                borderColor: 'rgba(0, 0, 0, 0.2)'
              },
              emphasis: {
                areaColor: '#F3B329',
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowBlur: 20,
                borderWidth: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          },
          series: [
            {
              name: '信息量',
              type: 'effectScatter',
              coordinateSystem: 'geo',
              encode: {
                lng: 0,
                lat: 1,
                value: 2
              },
              data: res,
              geoIndex: 0
            }
          ],
        };
        this.mapChart2.setOption(option);
      },
      //热力图
      /*
      *  todo
      *  import '../../node_modules/echarts/extension/bmap/bmap.js'得引入
      *  在index.html中<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=pT6uUXISbgdTd8NF8yOhGl0VjsQF6Z73"> 也得引入
      * */
      drawHeatmap() {
        /*
        mapHeateapData数据格式
        {
          "coord": [
            120.14280555506,
            30.23633761213
          ],
          "elevation": 5
        }
        最终转换成data数据的格式  [lat,lnt,value]
        * */
        // var point = [120.13066322374, 30.240018034923];
        var data = [].concat.apply([], mapHeatmapData.map(function (track) {
          return track.map(function (seg) {
            return seg.coord.concat([seg.elevation, 1]);
          });
        }));
        // console.log(11111,data);
        this.mapHeatmap = echarts.init(this.$refs.mapHeatmap);
        let option = {
          animation: false,
          bmap: {
            center: [120.13066322374, 30.240018034923], //中心点
            zoom: 14, //默认情况下地图缩放级别
            roam: true //表示用户是否可以拖放和缩放地图
          },
          visualMap: {
            show: true,
            type: 'continuous',//连续性得
            bottom: 50,
            left: 0,
            min: 0,
            max: 500,
            seriesIndex: 0,
            calculable: true,
            inRange: {
              color: ['blue', 'green', 'yellow', 'red']  //视觉映射组件中配色
            }
          },
          series: [{
            type: 'heatmap',
            coordinateSystem: 'bmap',
            data: data,
            pointSize: 5,
            blurSize: 6,
            // todo encode 很有用 它可以指定series里边的数据要映射到哪个区域,默认情况 0 lng , 1 lat , 2 value
            encode: {
              lng: 0,
              lat: 1,
              value: 2
            }
          }]
        };
        this.mapHeatmap.setOption(option);

        var bmap = this.mapHeatmap.getModel().getComponent('bmap').getBMap();
        /*
        bmap.setMinZoom(5); //设置缩放级别
        bmap.setMaxZoom(6);
        bmap.centerAndZoom("合肥",12);
        bmap.enableScrollWheelZoom(true);
        * */
        bmap.addControl(new BMap.NavigationControl());               // 添加平移缩放控件
        bmap.addControl(new BMap.ScaleControl());                    // 添加比例尺控件
        bmap.enableContinuousZoom();                              //启用地图惯性拖拽，默认禁用
        bmap.addControl(new BMap.OverviewMapControl());              //添加缩略地图控件
        bmap.enableScrollWheelZoom();                            //启用滚轮放大缩小
        bmap.addControl(new BMap.MapTypeControl());          //添加地图类型控件
        bmap.disable3DBuilding();
        // bmap.centerAndZoom(point);  //不太好使
        bmap.setMapStyle({style:'normal'});
      },
      //多图组合---环图
      drawRing(){
        this.myRingChart = echarts.init(this.$refs.myRingChart);
        let option = {
          tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c} ({d}%)'
          },
          legend: {
            orient: 'vertical',
            left: 10,
            data: ['直达', '营销广告', '搜索引擎', '邮件营销', '联盟广告', '视频广告', '百度', '谷歌', '必应', '其他']
          },
          series: [
            {
              name: '访问来源',
              type: 'pie',
              selectedMode: 'single',
              radius: [0, '30%'],

              label: {
                position: 'inner'
              },
              labelLine: {
                show: false
              },
              data: [
                {value: 335, name: '直达', selected: true},
                {value: 679, name: '营销广告'},
                {value: 1548, name: '搜索引擎'}
              ]
            },
            {
              name: '访问来源',
              type: 'pie',
              center:['50%','50%'], //饼图的中心（圆心）坐标，数组的第一项是横坐标，第二项是纵坐标。支持设置成百分比，设置成百分比时第一项是相对于容器宽度，第二项是相对于容器高度。
              radius: ['40%', '55%'],  //数组的第一项是内半径，第二项是外半径。每一项遵从上述 number string 的描述。可以将内半径设大显示成圆环图
              label: {
                formatter: '{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ',
                backgroundColor: '#eee',
                borderColor: '#aaa',
                borderWidth: 1,
                borderRadius: 4,
                rich: {
                  a: {
                    color: '#999',
                    lineHeight: 22,
                    align: 'center'
                  },
                  hr: {
                    borderColor: '#aaa',
                    width: '100%',
                    borderWidth: 0.5,
                    height: 0
                  },
                  b: {
                    fontSize: 16,
                    lineHeight: 33
                  },
                  per: {
                    color: '#eee',
                    backgroundColor: '#334455',
                    padding: [2, 4],
                    borderRadius: 2
                  }
                }
              },
              data: [
                {value: 335, name: '直达'},
                {value: 310, name: '邮件营销'},
                {value: 234, name: '联盟广告'},
                {value: 135, name: '视频广告'},
                {value: 1048, name: '百度'},
                {value: 251, name: '谷歌'},
                {value: 147, name: '必应'},
                {value: 102, name: '其他'}
              ]
            }
          ]
        };
        this.myRingChart.setOption(option);
      },
      //多图组合---柱状图+折线图
      drawBarLine(){
        this.myBarLine = echarts.init(this.$refs.myBarLine);
        let option = {
          title: {text: 'echarts 柱状图'},
          tooltip: {
          },
          axisPointer:{  //坐标指示器相关设置
            type:'shadow',
            show: true,
            shadowStyle:{
              // color: {   //默认 rgba(150,150,150,0.3)
              //   type: 'linear',   //可设置为径向渐变和线性渐变
              //   x: 0,
              //   y: 0,
              //   x2: 0,
              //   y2: 1,
              //   colorStops: [{
              //     offset: 0, color: 'red' // 0% 处的颜色
              //   }, {
              //     offset: 1, color: 'blue' // 100% 处的颜色
              //   }],
              //   global: false // 缺省为 false
              // }
            },
          },
          xAxis: {
            data: ["服装1", "服装2", "服装3", "服装4", "服装5", "服装6"]
          },
          yAxis: {
            // data: ["服装1", "服装2", "服装3", "服装4", "服装5", "服装6"]
          },
          series: [
            {
            name: '销量',
            type: 'line',
            data: [{
              value: 5,
              symbol: 'triangle',
              label: {show: true}
            }, 20, 36, 10, 10, 20],  // 1 symbol为拐点上的标记符号,可以自定义 2 label在这里可以单独的设置每一个数据
            // 下边的这些配置是对所有数据生效的
            label: {
              show: true,
              //formatter rich 组合使用可以自定义样式
              formatter: function (data) {
                // console.log('drawLine-formatter', data)
              },
              rich: {}
            },
            symbol: 'triangle',
            zlevel:3 //层级
          },
            {
              data: [120, 200, 150, 80, 70, 110],
              type: 'bar',
              // showBackground: true,  // 是否显示背景样式
              // backgroundStyle: {  //配置背景样式
              //   color: 'rgba(220, 220, 220, 0.8)'
              // },
              barGap:'-100%', //不同系列的柱间距离，默认为柱子宽度得 30%   -100%表示叠在一起 todo 设置一组就可以了
              zlevel:2 //层级
            },
            {
              data: [20, 20, 15, 180, 170, 110],
              type: 'bar',
              showBackground: true,  // 配置背景样式
              backgroundStyle: {
                color: 'rgba(220, 220, 220, 0.8)'
              },
              barGap:'-100%', //不同系列的柱间距离，默认为柱子宽度得 30%   -100%表示叠在一起
              zlevel:1 //层级
            }
          ]
        };
        this.myBarLine.setOption(option);
      },
      //雷达图
      drawRadar(){
        //数据   // date,AQIindex,PM2.5,PM10,CO,NO2,SO2
        var dataBJ = [
          [55,9,56,0.46,18,6,1],
          [25,11,21,0.65,34,9,2],
          [56,7,63,0.3,14,5,3],
          [33,7,29,0.33,16,6,4],
          [42,24,44,0.76,40,16,5],
          [82,58,90,1.77,68,33,6],
          [74,49,77,1.46,48,27,7],
          [78,55,80,1.29,59,29,8],
          [267,216,280,4.8,108,64,9],
          [185,127,216,2.52,61,27,10],
          [39,19,38,0.57,31,15,11],
          [41,11,40,0.43,21,7,12],
          [64,38,74,1.04,46,22,13],
          [108,79,120,1.7,75,41,14],
          [108,63,116,1.48,44,26,15],
          [33,6,29,0.34,13,5,16],
          [94,66,110,1.54,62,31,17],
          [186,142,192,3.88,93,79,18],
          [57,31,54,0.96,32,14,19],
          [22,8,17,0.48,23,10,20],
          [39,15,36,0.61,29,13,21],
          [94,69,114,2.08,73,39,22],
          [99,73,110,2.43,76,48,23],
          [31,12,30,0.5,32,16,24],
          [42,27,43,1,53,22,25],
          [154,117,157,3.05,92,58,26],
          [234,185,230,4.09,123,69,27],
          [160,120,186,2.77,91,50,28],
          [134,96,165,2.76,83,41,29],
          [52,24,60,1.03,50,21,30],
          [46,5,49,0.28,10,6,31]
        ];
        var dataGZ = [
          [26,37,27,1.163,27,13,1],
          [85,62,71,1.195,60,8,2],
          [78,38,74,1.363,37,7,3],
          [21,21,36,0.634,40,9,4],
          [41,42,46,0.915,81,13,5],
          [56,52,69,1.067,92,16,6],
          [64,30,28,0.924,51,2,7],
          [55,48,74,1.236,75,26,8],
          [76,85,113,1.237,114,27,9],
          [91,81,104,1.041,56,40,10],
          [84,39,60,0.964,25,11,11],
          [64,51,101,0.862,58,23,12],
          [70,69,120,1.198,65,36,13],
          [77,105,178,2.549,64,16,14],
          [109,68,87,0.996,74,29,15],
          [73,68,97,0.905,51,34,16],
          [54,27,47,0.592,53,12,17],
          [51,61,97,0.811,65,19,18],
          [91,71,121,1.374,43,18,19],
          [73,102,182,2.787,44,19,20],
          [73,50,76,0.717,31,20,21],
          [84,94,140,2.238,68,18,22],
          [93,77,104,1.165,53,7,23],
          [99,130,227,3.97,55,15,24],
          [146,84,139,1.094,40,17,25],
          [113,108,137,1.481,48,15,26],
          [81,48,62,1.619,26,3,27],
          [56,48,68,1.336,37,9,28],
          [82,92,174,3.29,0,13,29],
          [106,116,188,3.628,101,16,30],
          [118,50,0,1.383,76,11,31]
        ];
        var dataSH = [
          [91,45,125,0.82,34,23,1],
          [65,27,78,0.86,45,29,2],
          [83,60,84,1.09,73,27,3],
          [109,81,121,1.28,68,51,4],
          [106,77,114,1.07,55,51,5],
          [109,81,121,1.28,68,51,6],
          [106,77,114,1.07,55,51,7],
          [89,65,78,0.86,51,26,8],
          [53,33,47,0.64,50,17,9],
          [80,55,80,1.01,75,24,10],
          [117,81,124,1.03,45,24,11],
          [99,71,142,1.1,62,42,12],
          [95,69,130,1.28,74,50,13],
          [116,87,131,1.47,84,40,14],
          [108,80,121,1.3,85,37,15],
          [134,83,167,1.16,57,43,16],
          [79,43,107,1.05,59,37,17],
          [71,46,89,0.86,64,25,18],
          [97,71,113,1.17,88,31,19],
          [84,57,91,0.85,55,31,20],
          [87,63,101,0.9,56,41,21],
          [104,77,119,1.09,73,48,22],
          [87,62,100,1,72,28,23],
          [168,128,172,1.49,97,56,24],
          [65,45,51,0.74,39,17,25],
          [39,24,38,0.61,47,17,26],
          [39,24,39,0.59,50,19,27],
          [93,68,96,1.05,79,29,28],
          [188,143,197,1.66,99,51,29],
          [174,131,174,1.55,108,50,30],
          [187,143,201,1.39,89,53,31]
        ];
        var lineStyle = {
          normal: {
            width: 1,
            opacity: 0.5
          }
        };
        this.myRadar = echarts.init(this.$refs.myRadar);
        let option = {
          backgroundColor: '#161627',
          title: {
            text: 'AQI - 雷达图',
            left: 'center',
            textStyle: {
              color: '#eee'
            }
          },
          legend: {
            bottom: 5,
            data: ['北京', '上海', '广州'],
            itemGap: 20,
            textStyle: {
              color: '#fff',
              fontSize: 14
            },
            selectedMode: 'single'   //北京 上海 广州的雷达图显示一个 可以单选  //默认是全部显示出来
          },
          tooltip:{},  // 内容提示信息
          visualMap: {
            show: true,
            min: 0,
            max: 200,
            dimension: 6,
            inRange: {
              // color:'rgb(238, 197, 102)',
              colorLightness: [0.5, 0.8] //颜色从 0.5过渡到0.8
            }
          },
          radar: {
            indicator: [
              {name: 'AQI', max: 300},  //设置每一级的最大值
              {name: 'PM2.5', max: 250},
              {name: 'PM10', max: 300},
              {name: 'CO', max: 5},
              {name: 'NO2', max: 200},
              {name: 'SO2', max: 100}
            ],
            shape: 'circle',
            splitNumber: 5,
            name: {
              textStyle: {
                color: 'rgb(238, 197, 102)'
              }
            },
            splitLine: {
              lineStyle: {
                color: [
                  'rgba(238, 197, 102, 0.1)', 'rgba(238, 197, 102, 0.2)',
                  'rgba(238, 197, 102, 0.4)', 'rgba(238, 197, 102, 0.6)',
                  'rgba(238, 197, 102, 0.8)', 'rgba(238, 197, 102, 1)'
                ].reverse()
              }
            },
            splitArea: {
              show: false
            },
            axisLine: {
              lineStyle: {
                color: 'rgba(238, 197, 102, 0.5)'
              }
            }
          },
          series: [
            {
              name: '北京',
              type: 'radar',
              lineStyle: lineStyle,
              data: dataBJ,
              label:{
                show:true
              },
              symbol: 'circle',  // 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'
              itemStyle: {
                color: '#F9713C'
              },
              areaStyle: {
                opacity: 0.1
              }
            },
            {
              name: '上海',
              type: 'radar',
              lineStyle: lineStyle,
              data: dataSH,
              symbol: 'diamond',  // 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'
              itemStyle: {
                color: '#B3E4A1'
              },
              areaStyle: {
                opacity: 0.05
              }
            },
            {
              name: '广州',
              type: 'radar',
              lineStyle: lineStyle,
              data: dataGZ,
              symbol: 'roundRect',  //// 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'
              itemStyle: {
                color: 'rgb(238, 197, 102)'
              },
              areaStyle: {
                opacity: 0.05
              }
            }
          ]
        };
        this.myRadar.setOption(option);
      },
      //迁徙图  lines
      drawLines(){
        this.myLines = echarts.init(this.$refs.myLines);
        //地理坐标
        var geoCoordMap = {
          '上海': [121.4648,31.2891],
          '东莞': [113.8953,22.901],
          '东营': [118.7073,37.5513],
          '中山': [113.4229,22.478],
          '临汾': [111.4783,36.1615],
          '临沂': [118.3118,35.2936],
          '丹东': [124.541,40.4242],
          '丽水': [119.5642,28.1854],
          '乌鲁木齐': [87.9236,43.5883],
          '佛山': [112.8955,23.1097],
          '保定': [115.0488,39.0948],
          '兰州': [103.5901,36.3043],
          '包头': [110.3467,41.4899],
          '北京': [116.4551,40.2539],
          '北海': [109.314,21.6211],
          '南京': [118.8062,31.9208],
          '南宁': [108.479,23.1152],
          '南昌': [116.0046,28.6633],
          '南通': [121.1023,32.1625],
          '厦门': [118.1689,24.6478],
          '台州': [121.1353,28.6688],
          '合肥': [117.29,32.0581],
          '呼和浩特': [111.4124,40.4901],
          '咸阳': [108.4131,34.8706],
          '哈尔滨': [127.9688,45.368],
          '唐山': [118.4766,39.6826],
          '嘉兴': [120.9155,30.6354],
          '大同': [113.7854,39.8035],
          '大连': [122.2229,39.4409],
          '天津': [117.4219,39.4189],
          '太原': [112.3352,37.9413],
          '威海': [121.9482,37.1393],
          '宁波': [121.5967,29.6466],
          '宝鸡': [107.1826,34.3433],
          '宿迁': [118.5535,33.7775],
          '常州': [119.4543,31.5582],
          '广州': [113.5107,23.2196],
          '廊坊': [116.521,39.0509],
          '延安': [109.1052,36.4252],
          '张家口': [115.1477,40.8527],
          '徐州': [117.5208,34.3268],
          '德州': [116.6858,37.2107],
          '惠州': [114.6204,23.1647],
          '成都': [103.9526,30.7617],
          '扬州': [119.4653,32.8162],
          '承德': [117.5757,41.4075],
          '拉萨': [91.1865,30.1465],
          '无锡': [120.3442,31.5527],
          '日照': [119.2786,35.5023],
          '昆明': [102.9199,25.4663],
          '杭州': [119.5313,29.8773],
          '枣庄': [117.323,34.8926],
          '柳州': [109.3799,24.9774],
          '株洲': [113.5327,27.0319],
          '武汉': [114.3896,30.6628],
          '汕头': [117.1692,23.3405],
          '江门': [112.6318,22.1484],
          '沈阳': [123.1238,42.1216],
          '沧州': [116.8286,38.2104],
          '河源': [114.917,23.9722],
          '泉州': [118.3228,25.1147],
          '泰安': [117.0264,36.0516],
          '泰州': [120.0586,32.5525],
          '济南': [117.1582,36.8701],
          '济宁': [116.8286,35.3375],
          '海口': [110.3893,19.8516],
          '淄博': [118.0371,36.6064],
          '淮安': [118.927,33.4039],
          '深圳': [114.5435,22.5439],
          '清远': [112.9175,24.3292],
          '温州': [120.498,27.8119],
          '渭南': [109.7864,35.0299],
          '湖州': [119.8608,30.7782],
          '湘潭': [112.5439,27.7075],
          '滨州': [117.8174,37.4963],
          '潍坊': [119.0918,36.524],
          '烟台': [120.7397,37.5128],
          '玉溪': [101.9312,23.8898],
          '珠海': [113.7305,22.1155],
          '盐城': [120.2234,33.5577],
          '盘锦': [121.9482,41.0449],
          '石家庄': [114.4995,38.1006],
          '福州': [119.4543,25.9222],
          '秦皇岛': [119.2126,40.0232],
          '绍兴': [120.564,29.7565],
          '聊城': [115.9167,36.4032],
          '肇庆': [112.1265,23.5822],
          '舟山': [122.2559,30.2234],
          '苏州': [120.6519,31.3989],
          '莱芜': [117.6526,36.2714],
          '菏泽': [115.6201,35.2057],
          '营口': [122.4316,40.4297],
          '葫芦岛': [120.1575,40.578],
          '衡水': [115.8838,37.7161],
          '衢州': [118.6853,28.8666],
          '西宁': [101.4038,36.8207],
          '西安': [109.1162,34.2004],
          '贵阳': [106.6992,26.7682],
          '连云港': [119.1248,34.552],
          '邢台': [114.8071,37.2821],
          '邯郸': [114.4775,36.535],
          '郑州': [113.4668,34.6234],
          '鄂尔多斯': [108.9734,39.2487],
          '重庆': [107.7539,30.1904],
          '金华': [120.0037,29.1028],
          '铜川': [109.0393,35.1947],
          '银川': [106.3586,38.1775],
          '镇江': [119.4763,31.9702],
          '长春': [125.8154,44.2584],
          '长沙': [113.0823,28.2568],
          '长治': [112.8625,36.4746],
          '阳泉': [113.4778,38.0951],
          '青岛': [120.4651,36.3373],
          '韶关': [113.7964,24.7028]
        };
        var BJData = [
          [{name:'北京'}, {name:'上海',value:95}],
          [{name:'北京'}, {name:'广州',value:90}],
          [{name:'北京'}, {name:'大连',value:80}],
          [{name:'北京'}, {name:'南宁',value:70}],
          [{name:'北京'}, {name:'南昌',value:60}],
          [{name:'北京'}, {name:'拉萨',value:50}],
          [{name:'北京'}, {name:'长春',value:40}],
          [{name:'北京'}, {name:'包头',value:30}],
          [{name:'北京'}, {name:'重庆',value:20}],
          [{name:'北京'}, {name:'常州',value:10}]
        ];
        var SHData = [
          [{name:'上海'},{name:'包头',value:95}],
          [{name:'上海'},{name:'昆明',value:90}],
          [{name:'上海'},{name:'广州',value:80}],
          [{name:'上海'},{name:'郑州',value:70}],
          [{name:'上海'},{name:'长春',value:60}],
          [{name:'上海'},{name:'重庆',value:50}],
          [{name:'上海'},{name:'长沙',value:40}],
          [{name:'上海'},{name:'北京',value:30}],
          [{name:'上海'},{name:'丹东',value:20}],
          [{name:'上海'},{name:'大连',value:10}]
        ];
        var GZData = [
          [{name:'广州'},{name:'福州',value:95}],
          [{name:'广州'},{name:'太原',value:90}],
          [{name:'广州'},{name:'长春',value:80}],
          [{name:'广州'},{name:'重庆',value:70}],
          [{name:'广州'},{name:'西安',value:60}],
          [{name:'广州'},{name:'成都',value:50}],
          [{name:'广州'},{name:'常州',value:40}],
          [{name:'广州'},{name:'北京',value:30}],
          [{name:'广州'},{name:'北海',value:20}],
          [{name:'广州'},{name:'海口',value:10}]
        ];
        //飞机 SVG图
        var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';
        var convertData = function (data) {
          var res = [];
          for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
              res.push([{
                coord: fromCoord
              }, {
                coord: toCoord
              }]);
            }
          }
          return res;
        };
        var color = ['#a6c84c', '#ffa022', '#46bee9'];
        var series = [];
        [['北京', BJData], ['上海', SHData], ['广州', GZData]].forEach(function (item, i) {
          series.push(
            //特效
            {
              name: item[0] + ' Top10',
              type: 'lines',
              zlevel: 1,
              effect: {
                show: true,
                period: 6, //完成一次特效的时间
                trailLength: 0.7,  //特效的长度
                color: '#fff',
                symbolSize: 3  //特效的大小
              },
              lineStyle: {
                normal: {
                  color: color[i],
                  width: 0,
                  curveness: 0.2  //弧度 0-1
                }
              },
              data: convertData(item[1])  //  数据格式 [[{lng,lat},{lng,lat}]]
            },
            //飞机的数据
            {
              name: item[0] + ' Top10',
              type: 'lines',
              zlevel: 2,
              effect: {
                show: true,
                period: 6,
                trailLength: 0,
                symbol: planePath,
                symbolSize: 15
              },
              lineStyle: {
                normal: {
                  color: color[i],
                  width: 1,
                  opacity: 0.4,
                  curveness: 0.2
                }
              },
              data: convertData(item[1])
            },
            //城市
            {
              name: item[0] + ' Top10',
              type: 'effectScatter', //涟漪效果的散点图
              coordinateSystem: 'geo',
              zlevel: 2,
              rippleEffect: { //涟漪特效相关配置。
                brushType: 'stroke'
              },
              label: {
                normal: {
                  show: true,
                  position: 'right',
                  formatter: '{b}'
                }
              },
              symbolSize: function (val) {
                return val[2] / 8;
              },
              itemStyle: {
                normal: {
                  color: color[i]
                }
              },
              data: item[1].map(function (dataItem) {
                return {
                  name: dataItem[1].name,
                  value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                };
              })
            }
        );
        });
        //option
        let option = {
          backgroundColor: '#404a59',
          title : {
            text: '模拟迁徙',
            subtext: '数据纯属虚构',
            left: 'center',
            textStyle : {
              color: '#fff'
            }
          },
          tooltip : {
            trigger: 'item'
          },
          legend: {
            orient: 'vertical',
            top: 'bottom',
            left: 'right',
            data:['北京 Top10', '上海 Top10', '广州 Top10'],
            textStyle: {
              color: '#fff'
            },
            selectedMode: 'single'
          },
          geo: {
            map: 'china',
            label: {
              emphasis: {
                show: false
              }
            },
            roam: true,
            itemStyle: {
              normal: {
                areaColor: '#323c48',
                borderColor: '#404a59'
              },
              emphasis: {
                areaColor: '#2a333d'
              }
            }
          },
          series: series
        };
        this.myLines.setOption(option);
      },

      //节流函数
      debounce(func, delay) {
        let timer;
        // 通过闭包使timer一直存在内存中
        return function (...args) {
          if (timer) {
            clearTimeout(timer);
          }
          timer = setTimeout(() => {
            func.apply(this, args); //通过apply还原this指向事件
          }, delay)
        }
      },
      // 随机数 为地图提供参数
      randomValue() {
        return Math.round(Math.random() * 1000);
      }
    }
  }
</script>

<style>
  .echarts {
    width: 100%;
    height: 100%;
    min-height: 300px;
  }
</style>
